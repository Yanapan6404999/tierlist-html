<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Tier List</title>
  <style>
    body { font-family: Arial; background: #161616; color: white; padding: 20px; }
    #container { max-width: 1200px; margin: auto; }
    h1 { text-align: center; margin-bottom: 20px; }
    #upload { margin-bottom: 20px; padding: 15px; background: #222; border: 2px dashed #555; border-radius: 10px; }
    #image-pool { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
    .champ-img { width: 70px; height: 70px; object-fit: cover; border: 2px solid #777; border-radius: 6px; cursor: grab; }
    .tier-table { width: 100%; border-collapse: separate; border-spacing: 0; margin-top: 30px; overflow: hidden; border-radius: 12px; }
    .tier-table th { background: #333; padding: 10px; text-align: center; font-size: 18px; border-right: 1px solid #444; }
    .tier-label { width: 60px; font-weight: bold; text-align: center; font-size: 22px; color: white; }
    tr.s-row td:nth-child(1) { background: #d7263d; }
    tr.a-row td:nth-child(1) { background: #f97316; }
    tr.b-row td:nth-child(1) { background: #2563eb; }
    tr.f-row td:nth-child(1) { background: #6b7280; }
    .dropzone { height: 150px; padding: 10px; border-left: 1px solid #444; background: #1f1f1f; vertical-align: top; }
    .dropzone:hover { background: #2a2a2a; transition: 0.1s; }
    #exportBtn { margin-top: 25px; padding: 10px 20px; border: none; background: #22c55e; font-size: 18px; cursor: pointer; border-radius: 8px; }
    #exportBtn:hover { background: #16a34a; }
  </style>
</head>
<body>
<div id="container">
  <h1>Tier List Drag & Drop</h1>

  <div id="upload">
    <label>อัปโหลดรูป: </label>
    <input type="file" id="fileInput" multiple accept="image/*">
    <div id="image-pool"></div>
  </div>

  <div id="tier-area">
    <table class="tier-table">
      <tr>
        <th></th>
        <th>Top</th>
        <th>Jungle</th>
        <th>Mid</th>
        <th>ADC</th>
        <th>Support</th>
      </tr>

      <tr class="s-row">
        <td class="tier-label">S</td>
        <td class="dropzone"></td><td class="dropzone"></td><td class="dropzone"></td>
        <td class="dropzone"></td><td class="dropzone"></td>
      </tr>

      <tr class="a-row">
        <td class="tier-label">A</td>
        <td class="dropzone"></td><td class="dropzone"></td><td class="dropzone"></td>
        <td class="dropzone"></td><td class="dropzone"></td>
      </tr>

      <tr class="b-row">
        <td class="tier-label">B</td>
        <td class="dropzone"></td><td class="dropzone"></td><td class="dropzone"></td>
        <td class="dropzone"></td><td class="dropzone"></td>
      </tr>

      <tr class="f-row">
        <td class="tier-label">F</td>
        <td class="dropzone"></td><td class="dropzone"></td><td class="dropzone"></td>
        <td class="dropzone"></td><td class="dropzone"></td>
      </tr>
    </table>
  </div>

  <button id="exportBtn">Export เป็นรูป PNG</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>

<script>
  const fileInput = document.getElementById("fileInput");
  const imagePool = document.getElementById("image-pool");

  const defaultImages = [
    "images/1.jpg",
    "images/2.jpg",
    "images/3.jpg",
    "images/4.jpg",
    "images/5.jpg",
    "images/7.jpg",
    "images/8.png",
    "images/9.jpg",
    "images/10.png",
    "images/11.jpg",
    "images/12.png",
    "images/13.jpg",
    "images/14.png",
    "images/15.jpg",
    "images/16.png",
    "images/17.jpg",
    "images/18.png",
    "images/19.jpg",
    "images/20.png",
    "images/21.jpg",
    "images/22.png",
    "images/23.jpg",
    "images/24.png",
    "images/25.jpg",
    "images/27.png",
    "images/28.jpg",
    "images/29.png",
    "images/30.jpg",
    "images/31.png",
    "images/32.jpg",
    "images/33.png",
    "images/34.jpg",
    "images/35.png",
    "images/36.jpg",
    "images/37.png",
    "images/38.jpg",
    "images/40.png",
    "images/41.jpg",
    "images/42.png",
    "images/43.jpg",
    "images/44.png",
    "images/45.jpg",
    "images/46.png",
    "images/47.jpg",
    "images/48.png",
    "images/49.jpg",
    "images/50.png",
    "images/51.jpg",
    "images/52.png",
    "images/53.jpg",
    "images/54.png",
    "images/55.jpg",
    "images/56.png",
    "images/57.jpg",
    "images/58.png",
    "images/59.jpg",
    "images/60.png",
    "images/61.jpg",
    "images/62.png",
    "images/63.jpg",
    "images/64.png",
    "images/65.jpg",
    "images/66.png",
    "images/67.jpg",
    "images/68.png",
    "images/69.jpg",
    "images/70.png",
    "images/71.jpg",
    "images/72.png",
    "images/73.jpg",
    "images/74.png",
    "images/75.jpg",
    "images/76.png",
    "images/77.jpg",
    "images/78.png",
    "images/79.jpg",
    "images/80.png",
    "images/81.jpg",
    "images/82.png",
    "images/83.jpg",
    "images/84.png",
    "images/85.jpg",
    "images/86.png",
    "images/87.jpg",
    "images/88.png",
    "images/89.jpg",
    "images/90.png",
    "images/91.jpg",
    "images/92.png",
    "images/93.jpg",
    "images/94.png",
    "images/95.jpg",
    "images/96.png",
    "images/97.jpg",
    "images/98.png",
    "images/99.jpg",
    "images/100.png",
    "images/101.jpg",
    "images/102.png",
    "images/103.jpg",
    "images/104.png",
    "images/105.jpg",
    "images/106.png",
    "images/107.jpg",
    "images/108.png",
    "images/109.jpg",
    "images/110.png",
    "images/111.jpg",
    "images/112.png",
    "images/113.jpg",
    "images/114.png",
    "images/115.jpg",
    "images/116.png",
    "images/117.jpg",
    "images/118.png",
    "images/119.jpg",
    "images/120.png",
    "images/121.jpg",
    "images/122.png",
    "images/123.jpg",
    "images/124.png",
    "images/125.jpg",
    "images/126.png",
    "images/127.png",
    "images/128.png"
];

  defaultImages.forEach(src => {
    const img = document.createElement("img");
    img.src = src;
    img.className = "champ-img";
    imagePool.appendChild(img);
  });

  fileInput.addEventListener("change", function () {
    [...this.files].forEach(file => {
      const reader = new FileReader();
      reader.onload = e => {
        const img = document.createElement("img");
        img.src = e.target.result;
        img.className = "champ-img";
        imagePool.appendChild(img);
      };
      reader.readAsDataURL(file);
    });
  });

  Sortable.create(imagePool, { animation: 150, group: "tier" });

  document.querySelectorAll(".dropzone").forEach(zone => {
    Sortable.create(zone, { animation: 150, group: "tier" });
  });

  document.getElementById("exportBtn").addEventListener("click", () => {
    const element = document.getElementById("tier-area");
    html2canvas(element).then(canvas => {
      const link = document.createElement('a');
      link.download = 'tierlist.png';
      link.href = canvas.toDataURL();
      link.click();
    });
  });
</script>

</body>
</html>
